{"version":3,"file":"flexCarousel.js","sources":["../src/flexCarousel.js"],"sourcesContent":["/*\n * flexCarousel.js v1.0.0\n * https://github.com/tomhrtly/flexCarousel.js\n *\n * Copyright 2019 Tom Hartley\n * Released under the MIT license\n *\n * Icons provided by Font Awesome: https://fontawesome.com\n */\n\nclass FlexCarousel {\n    constructor(selector, options = {}) {\n        this.selectorName = selector.toString();\n        this.selector = document.querySelector(selector);\n\n        this.defaults = {\n            appendArrows: this.selector,\n            arrows: true,\n            arrowsOverlay: true,\n            autoplay: false,\n            autoplaySpeed: 5000,\n            circles: true,\n            circlesOverlay: true,\n            height: null,\n            infinite: true,\n            initialPage: 0,\n            nextButton: '<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"angle-right\" class=\"svg-inline--fa fa-angle-right fa-w-8\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 256 512\"><path fill=\"currentColor\" d=\"M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z\"></path></svg>',\n            prevButton: '<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"angle-left\" class=\"svg-inline--fa fa-angle-left fa-w-8\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 256 512\"><path fill=\"currentColor\" d=\"M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z\"></path></svg>',\n            responsive: null,\n            slidesPerPage: 1,\n            slidesScrolling: 1,\n            transition: 'slide',\n            transitionSpeed: 250,\n        };\n\n        this.activeBreakpoint = null;\n        this.autoplayDirection = 'right';\n        this.autoplayTimer = null;\n        this.breakpoints = [];\n        this.customEvents = {\n            breakpoint: new CustomEvent('breakpoint'),\n            pageChanged: new CustomEvent('pageChanged'),\n            pageChanging: new CustomEvent('pageChanging'),\n        };\n        this.options = FlexCarousel.extend(this.defaults, options);\n        this.originalOptions = this.options;\n        this.pageAmount = null;\n        this.pageWidth = null;\n\n        this.currentPage = this.options.initialPage;\n\n        this.init();\n    }\n\n    animatePage(target) {\n        const slides = this.selector.querySelector('.fc-slides');\n\n        if (this.options.transition === 'slide') {\n            slides.style.transition = `all ${this.options.transitionSpeed}ms ease-in-out 0s`;\n        }\n\n        this.setTransform(Math.ceil(target));\n\n        new Promise((resolve) => {\n            setTimeout(() => {\n                if (this.options.transition === 'slide') {\n                    slides.style.transition = '';\n                }\n\n                resolve(true);\n            }, this.options.transitionSpeed);\n        }).then(() => this.setTransform(this.getLeftPage(this.currentPage)));\n    }\n\n    autoplay() {\n        let pause = false;\n        let slide;\n\n        document.addEventListener('visibilitychange', () => {\n            pause = document.visibilityState !== 'visible';\n        });\n\n        if (this.autoplayTimer) {\n            clearInterval(this.autoplayTimer);\n        }\n\n        if (this.options.autoplay) {\n            this.autoplayTimer = setInterval(() => {\n                if (!pause) {\n                    if (!this.options.infinite) {\n                        if (this.autoplayDirection === 'right') {\n                            slide = 'next';\n\n                            if ((this.currentPage + 1) === (this.pageAmount - 1)) {\n                                this.autoplayDirection = 'left';\n                            }\n                        } else if (this.autoplayDirection === 'left') {\n                            slide = 'previous';\n\n                            if (this.currentPage === 1) {\n                                this.autoplayDirection = 'right';\n                            }\n                        }\n                    } else {\n                        slide = 'next';\n                    }\n                    this.movePage(slide);\n                }\n            }, this.options.autoplaySpeed);\n\n            this.selector.addEventListener('mouseenter', () => { pause = true; });\n            this.selector.addEventListener('mouseleave', () => { pause = false; });\n            this.selector.addEventListener('focusin', () => { pause = true; });\n            this.selector.addEventListener('focusout', () => { pause = false; });\n        }\n    }\n\n    buildArrowEvents() {\n        const nextButton = this.options.appendArrows.querySelector('.fc-next');\n        const prevButton = this.options.appendArrows.querySelector('.fc-prev');\n\n        // Move to the next slide when clicking the next arrow\n        nextButton.addEventListener('click', () => {\n            this.movePage('next');\n        });\n\n        // Move to the previous slide when clicking the previous arrow\n        prevButton.addEventListener('click', () => {\n            this.movePage('previous');\n        });\n    }\n\n    buildArrows() {\n        const slides = this.selector.querySelector('.fc-slides');\n        const slide = slides.querySelectorAll('.fc-slide');\n\n        if (this.options.arrows) {\n            // Only show the arrows if there are more slides then slidesPerPage option\n            if (this.options.slidesPerPage < slide.length) {\n                this.selector.classList.add('fc-has-arrows');\n\n                // Create arrow button\n                const nextButton = document.createElement('button');\n                nextButton.classList.add('fc-next');\n                nextButton.setAttribute('aria-label', 'Next');\n                nextButton.innerHTML = `<span class=\"fc-is-sr-only\">Next</span><span class=\"fc-icon\">${this.options.nextButton}</span>`;\n\n                // Create prev button\n                const prevButton = document.createElement('button');\n                prevButton.classList.add('fc-prev');\n                prevButton.setAttribute('aria-label', 'Previous');\n                prevButton.innerHTML = `<span class=\"fc-is-sr-only\">Previous</span><span class=\"fc-icon\">${this.options.prevButton}</span>`;\n\n                // Append next arrow to the selector\n                this.options.appendArrows.appendChild(nextButton);\n\n                // Prepend prev arrow to the selector\n                this.options.appendArrows.insertBefore(prevButton, this.options.appendArrows.firstChild);\n\n                // Add the overlay class if needed\n                if (this.options.arrowsOverlay) {\n                    this.selector.classList.add('fc-has-arrows-overlay');\n                }\n\n                this.buildArrowEvents();\n                this.updateArrows();\n            }\n        }\n    }\n\n    buildBreakpointEvent() {\n        let timer;\n\n        window.addEventListener('resize', () => {\n            clearTimeout(timer);\n            timer = setTimeout(() => {\n                this.updateResponsive();\n            }, 500);\n        });\n    }\n\n    buildBreakpoints() {\n        const breakpoints = [];\n\n        if (this.options.responsive) {\n            let previous = this.options;\n\n            this.options.responsive.forEach(({ breakpoint, options }) => {\n                if (!breakpoints.includes(breakpoint)) {\n                    breakpoints.push(breakpoint);\n\n                    this.breakpoints[breakpoint] = FlexCarousel.extend(previous, options);\n                    previous = FlexCarousel.extend(previous, options);\n                }\n            });\n        }\n\n        this.buildBreakpointEvent();\n        this.updateResponsive(false);\n    }\n\n    buildCircleEvents() {\n        const circles = this.selector.querySelector('.fc-container').querySelectorAll('.fc-circle');\n\n        circles.forEach((element, index) => {\n            element.addEventListener('click', () => this.movePage(index));\n        });\n    }\n\n    buildCircles() {\n        if (this.options.circles) {\n            // Only show the arrows if there are more slides then slidesPerPage option\n            if (this.options.slidesPerPage < this.pageAmount) {\n                this.selector.classList.add('fc-has-circles');\n\n                // Create circles container\n                const circles = document.createElement('ul');\n                circles.classList.add('fc-circles');\n\n                this.selector.querySelector('.fc-container').appendChild(circles);\n\n                const option = this.options.slidesPerPage > this.options.slidesScrolling ? this.options.slidesScrolling : this.options.slidesPerPage;\n                const amount = Math.ceil(this.pageAmount / option);\n\n                for (let index = 0; index < amount; index += 1) {\n                    const li = document.createElement('li');\n\n                    const circle = document.createElement('button');\n                    circle.classList.add('fc-circle');\n                    circle.setAttribute('aria-label', `${FlexCarousel.suffix(index + 1)} page`);\n\n                    const icon = document.createElement('span');\n                    icon.classList.add('fc-icon', 'fc-is-circle');\n\n                    const text = document.createElement('span');\n                    text.classList.add('fc-is-sr-only');\n                    text.innerHTML = index + 1;\n\n                    circle.appendChild(icon);\n                    circle.appendChild(text);\n                    li.appendChild(circle);\n                    circles.appendChild(li);\n                }\n\n                if (this.options.circlesOverlay) {\n                    this.selector.classList.add('fc-has-circles-overlay');\n                }\n\n                this.updateCircles();\n                this.buildCircleEvents();\n            }\n        }\n    }\n\n    buildOptions() {\n        if (this.options.height) {\n            this.selector.style.height = this.options.height;\n        }\n\n        this.autoplay();\n    }\n\n    buildSlideEvents() {\n        window.addEventListener('orientationchange', () => {\n            this.orientationChange();\n        });\n\n        this.selector.onfocus = () => {\n            if (document.activeElement === this.selector) {\n                document.onkeyup = (e) => {\n                    if (e.key === 'ArrowRight') {\n                        this.movePage('next');\n                    } else if (e.key === 'ArrowLeft') {\n                        this.movePage('previous');\n                    }\n                };\n            }\n        };\n\n        this.selector.onblur = () => {\n            document.onkeyup = () => {};\n        };\n    }\n\n    buildSlides() {\n        const ul = this.selector.querySelector('ul');\n\n        ul.classList.add('fc-slides');\n\n        // Add the slide class to all child div elements\n        for (let index = 0; index < ul.children.length; index += 1) {\n            ul.children[index].classList.add('fc-slide');\n        }\n\n        this.selector.setAttribute('tabindex', '0');\n\n        // Wrap slides to reduce HTML markup\n        this.selector.innerHTML = `<div class=\"fc-container\">${this.selector.innerHTML}</div>`;\n\n        const slides = this.selector.querySelector('.fc-slides');\n        const allSlides = slides.querySelectorAll('.fc-slide');\n\n        this.pageAmount = allSlides.length;\n\n        if (this.options.slidesPerPage < this.pageAmount) {\n            this.pageWidth = 100 / this.options.slidesPerPage;\n\n            // Add the min-width CSS property to all slides\n            for (let index = 0; index < this.pageAmount; index += 1) {\n                allSlides[index].style.minWidth = `${this.pageWidth}%`;\n            }\n\n            if (this.options.infinite) {\n                // Clone and prepend/append slides\n                const array = Array.from(allSlides);\n                let prepend;\n                let append;\n\n                if (this.options.slidesPerPage >= this.options.slidesScrolling) {\n                    prepend = array.slice(this.pageAmount - this.options.slidesPerPage, this.pageAmount).reverse();\n                    append = array.slice(0, this.options.slidesPerPage);\n                }\n\n                for (let index = 0; index < prepend.length; index += 1) {\n                    const clone = prepend[index].cloneNode(true);\n                    clone.classList.add('fc-is-clone');\n                    slides.insertBefore(clone, slides.firstChild);\n                }\n\n                for (let index = 0; index < append.length; index += 1) {\n                    const clone = append[index].cloneNode(true);\n                    clone.classList.add('fc-is-clone');\n                    slides.appendChild(clone);\n                }\n            }\n\n            this.setTransform(this.getLeftPage(this.currentPage));\n        }\n\n        this.buildSlideEvents();\n    }\n\n    destroy() {\n        this.selector.querySelectorAll('.fc-slide.fc-is-clone').forEach((element) => {\n            this.selector.querySelector('.fc-slides').removeChild(element);\n        });\n\n        this.selector.querySelectorAll('.fc-slide').forEach((element) => {\n            element.removeAttribute('class');\n            element.removeAttribute('style');\n        });\n\n        this.selector.querySelector('.fc-slides').removeAttribute('style');\n        this.selector.querySelector('.fc-slides').removeAttribute('class');\n\n        if (this.options.circles) {\n            this.selector.querySelector('.fc-container').removeChild(this.selector.querySelector('.fc-circles'));\n        }\n\n        this.selector.innerHTML = this.selector.querySelector('.fc-container').innerHTML;\n\n        this.selector.className = this.selectorName.replace('.', '');\n        this.selector.removeAttribute('style');\n    }\n\n    getLeftPage(index) {\n        let slideOffset;\n\n        if (this.options.slidesPerPage < this.pageAmount) {\n            if (this.options.slidesPerPage >= this.options.slidesScrolling) {\n                slideOffset = (this.pageWidth * this.options.slidesPerPage) * -1;\n            }\n\n            if (!this.options.infinite) {\n                slideOffset = 0;\n            }\n        }\n\n        return ((index * this.pageWidth) * -1) + slideOffset;\n    }\n\n    init() {\n        if (!this.selector.classList.contains('fc')) {\n            this.selector.classList.add('fc');\n            this.buildSlides();\n            this.buildArrows();\n            this.buildCircles();\n            this.buildOptions();\n            this.buildBreakpoints();\n        }\n    }\n\n    movePage(index) {\n        const unevenOffset = (this.pageAmount % this.options.slidesScrolling !== 0);\n        const indexOffset = unevenOffset ? 0 : (this.pageAmount - this.currentPage) % this.options.slidesScrolling;\n\n        if (index === 'previous') {\n            const slideOffset = indexOffset === 0 ? this.options.slidesScrolling : this.options.slidesPerPage - indexOffset;\n\n            if (this.options.slidesPerPage < this.pageAmount) {\n                this.slideController(this.currentPage - slideOffset);\n            }\n        } else if (index === 'next') {\n            const slideOffset = indexOffset === 0 ? this.options.slidesScrolling : indexOffset;\n\n            if (this.options.slidesPerPage < this.pageAmount) {\n                this.slideController(this.currentPage + slideOffset);\n            }\n        } else {\n            const page = index === 0 ? 0 : index * this.options.slidesScrolling;\n            this.slideController(page);\n        }\n\n        if (this.options.arrows) {\n            this.updateArrows();\n        }\n\n        if (this.options.circles) {\n            this.updateCircles();\n        }\n\n        this.selector.dispatchEvent(this.customEvents.pageChanging);\n\n        setTimeout(() => {\n            this.selector.dispatchEvent(this.customEvents.pageChanged);\n        }, this.options.transitionSpeed);\n    }\n\n    orientationChange() {\n        this.updateResponsive();\n        this.setTransform();\n    }\n\n    reinit(options = {}) {\n        this.destroy();\n        this.options = FlexCarousel.extend(this.defaults, options);\n        this.init();\n        this.selector.dispatchEvent(this.customEvents.breakpoint);\n    }\n\n    setTransform(position) {\n        const slides = this.selector.querySelector('.fc-slides');\n        slides.style.transform = `translate3d(${Math.ceil(position)}%, 0px, 0px)`;\n    }\n\n    slideController(index) {\n        let nextPage;\n\n        if (index < 0) {\n            if (this.pageAmount % this.options.slidesScrolling !== 0) {\n                nextPage = this.pageAmount - (this.pageAmount % this.options.slidesScrolling);\n            } else {\n                nextPage = this.pageAmount + index;\n            }\n        } else if (index >= this.pageAmount) {\n            if (this.pageAmount % this.options.slidesScrolling !== 0) {\n                nextPage = 0;\n            } else {\n                nextPage = index - this.pageAmount;\n            }\n        } else {\n            nextPage = index;\n        }\n\n        this.currentPage = nextPage;\n        this.animatePage(this.getLeftPage(index));\n    }\n\n    updateArrows() {\n        const prevButton = this.options.appendArrows.querySelector('.fc-prev');\n        const nextButton = this.options.appendArrows.querySelector('.fc-next');\n\n        if (!this.options.infinite) {\n            if (this.currentPage === 0) {\n                prevButton.setAttribute('disabled', 'disabled');\n            } else {\n                prevButton.removeAttribute('disabled');\n            }\n\n            if (this.currentPage === this.pageAmount - 1) {\n                nextButton.setAttribute('disabled', 'disabled');\n            } else {\n                nextButton.removeAttribute('disabled');\n            }\n        }\n    }\n\n    updateCircles() {\n        const circles = this.selector.querySelector('.fc-container').querySelectorAll('.fc-circle');\n\n        for (let index = 0; index < circles.length; index += 1) {\n            circles[index].classList.remove('fc-is-active');\n        }\n\n        const index = Math.floor(this.currentPage / this.options.slidesScrolling);\n\n        circles[index].classList.add('fc-is-active');\n    }\n\n    updateResponsive() {\n        let targetBreakpoint;\n\n        this.breakpoints.forEach((options, breakpoint) => {\n            if (window.innerWidth >= breakpoint) {\n                targetBreakpoint = breakpoint;\n            }\n        });\n\n        if (targetBreakpoint) {\n            if (this.activeBreakpoint) {\n                if (targetBreakpoint !== this.activeBreakpoint) {\n                    this.activeBreakpoint = targetBreakpoint;\n                    this.reinit(this.breakpoints[targetBreakpoint]);\n                }\n            } else {\n                this.activeBreakpoint = targetBreakpoint;\n                this.reinit(this.breakpoints[targetBreakpoint]);\n            }\n        } else if (this.activeBreakpoint !== null) {\n            this.activeBreakpoint = null;\n            this.reinit(this.originalOptions);\n        }\n    }\n\n    static extend(defaults, options) {\n        const extended = {};\n\n        if (defaults) {\n            const keys = Object.keys(defaults);\n\n            keys.forEach((value) => {\n                if (Object.prototype.hasOwnProperty.call(defaults, value)) {\n                    extended[value] = defaults[value];\n                }\n            });\n        }\n\n        if (options) {\n            const keys = Object.keys(options);\n\n            keys.forEach((value) => {\n                if (Object.prototype.hasOwnProperty.call(options, value)) {\n                    extended[value] = options[value];\n                }\n            });\n        }\n\n        return extended;\n    }\n\n    static suffix(index) {\n        const j = index % 10;\n        const k = index % 100;\n\n        if (j === 1 && k !== 11) {\n            return `${index}st`;\n        }\n\n        if (j === 2 && k !== 12) {\n            return `${index}nd`;\n        }\n\n        if (j === 3 && k !== 13) {\n            return `${index}rd`;\n        }\n\n        return `${index}th`;\n    }\n}\n\nexport default FlexCarousel;\n"],"names":["FlexCarousel","selector","options","selectorName","toString","document","querySelector","defaults","appendArrows","arrows","arrowsOverlay","autoplay","autoplaySpeed","circles","circlesOverlay","height","infinite","initialPage","nextButton","prevButton","responsive","slidesPerPage","slidesScrolling","transition","transitionSpeed","activeBreakpoint","autoplayDirection","autoplayTimer","breakpoints","customEvents","breakpoint","CustomEvent","pageChanged","pageChanging","extend","originalOptions","pageAmount","pageWidth","currentPage","init","target","slides","style","setTransform","Math","ceil","Promise","resolve","setTimeout","then","getLeftPage","pause","slide","addEventListener","visibilityState","clearInterval","setInterval","movePage","querySelectorAll","length","classList","add","createElement","setAttribute","innerHTML","appendChild","insertBefore","firstChild","buildArrowEvents","updateArrows","timer","window","clearTimeout","updateResponsive","previous","forEach","includes","push","buildBreakpointEvent","element","index","option","amount","li","circle","suffix","icon","text","updateCircles","buildCircleEvents","orientationChange","onfocus","activeElement","onkeyup","e","key","onblur","ul","children","allSlides","minWidth","array","Array","from","prepend","append","slice","reverse","clone","cloneNode","buildSlideEvents","removeChild","removeAttribute","className","replace","slideOffset","contains","buildSlides","buildArrows","buildCircles","buildOptions","buildBreakpoints","unevenOffset","indexOffset","slideController","page","dispatchEvent","destroy","position","transform","nextPage","animatePage","remove","floor","targetBreakpoint","innerWidth","reinit","extended","keys","Object","value","prototype","hasOwnProperty","call","j","k"],"mappings":"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"}