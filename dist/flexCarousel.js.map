{"version":3,"file":"flexCarousel.js","sources":["../src/flexCarousel.js"],"sourcesContent":["/*\n * flexCarousel.js v1.0.0\n * https://github.com/tomhrtly/flexCarousel.js\n *\n * Copyright 2019 Tom Hartley\n * Released under the MIT license\n *\n * Icons provided by Font Awesome: https://fontawesome.com\n */\n\nclass FlexCarousel {\n    constructor(selector, options = {}) {\n        this.selectorName = selector.toString();\n        this.selector = document.querySelector(selector);\n\n        this.defaults = {\n            appendArrows: this.selector,\n            arrows: true,\n            arrowsOverlay: true,\n            autoplay: false,\n            autoplaySpeed: 5000,\n            circles: true,\n            circlesOverlay: true,\n            height: null,\n            infinite: true,\n            initialPage: 0,\n            nextButton: '<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"angle-right\" class=\"svg-inline--fa fa-angle-right fa-w-8\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 256 512\"><path fill=\"currentColor\" d=\"M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z\"></path></svg>',\n            prevButton: '<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"angle-left\" class=\"svg-inline--fa fa-angle-left fa-w-8\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 256 512\"><path fill=\"currentColor\" d=\"M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z\"></path></svg>',\n            responsive: null,\n            slidesPerPage: 1,\n            slidesScrolling: 1,\n            transition: 'slide',\n            transitionSpeed: 250,\n        };\n\n        this.activeBreakpoint = null;\n        this.autoplayDirection = 'right';\n        this.autoplayTimer = null;\n        this.breakpoints = [];\n        this.options = FlexCarousel.extend(this.defaults, options);\n        this.originalOptions = this.options;\n        this.slideAmount = null;\n        this.slideWidth = null;\n\n        this.currentPage = this.options.initialPage;\n\n        this.init();\n    }\n\n    addTransition() {\n        const slides = this.selector.querySelector('.fc-slides');\n\n        if (this.options.transition === 'slide') {\n            slides.style.transition = `all ${this.options.transitionSpeed}ms ease-in-out 0s`;\n        }\n    }\n\n    animatePage(target) {\n        this.addTransition();\n        this.setTransform(Math.ceil(target));\n\n        new Promise((resolve) => {\n            setTimeout(() => {\n                this.removeTransition();\n                resolve(true);\n            }, this.options.transitionSpeed);\n        }).then(() => this.setTransform(this.getLeftPage(this.currentPage)));\n    }\n\n    autoplay() {\n        let pause = false;\n        let slide;\n\n        document.addEventListener('visibilitychange', () => {\n            pause = document.visibilityState !== 'visible';\n        });\n\n        if (this.autoplayTimer) {\n            clearInterval(this.autoplayTimer);\n        }\n\n        if (this.options.autoplay) {\n            this.autoplayTimer = setInterval(() => {\n                if (!pause) {\n                    if (!this.options.infinite) {\n                        if (this.autoplayDirection === 'right') {\n                            slide = 'next';\n\n                            if ((this.currentPage + 1) === (this.slideAmount - 1)) {\n                                this.autoplayDirection = 'left';\n                            }\n                        } else if (this.autoplayDirection === 'left') {\n                            slide = 'previous';\n\n                            if (this.currentPage === 1) {\n                                this.autoplayDirection = 'right';\n                            }\n                        }\n                    } else {\n                        slide = 'next';\n                    }\n                    this.movePage(slide);\n                }\n            }, this.options.autoplaySpeed);\n\n            this.selector.addEventListener('mouseenter', () => { pause = true; });\n            this.selector.addEventListener('mouseleave', () => { pause = false; });\n            this.selector.addEventListener('focusin', () => { pause = true; });\n            this.selector.addEventListener('focusout', () => { pause = false; });\n        }\n    }\n\n    buildArrowEvents() {\n        const nextButton = this.options.appendArrows.querySelector('.fc-next');\n        const prevButton = this.options.appendArrows.querySelector('.fc-prev');\n\n        // Move to the next slide when clicking the next arrow\n        nextButton.addEventListener('click', () => {\n            this.movePage('next');\n        });\n\n        // Move to the previous slide when clicking the previous arrow\n        prevButton.addEventListener('click', () => {\n            this.movePage('previous');\n        });\n    }\n\n    buildArrows() {\n        const slides = this.selector.querySelector('.fc-slides');\n        const slide = slides.querySelectorAll('.fc-slide');\n\n        if (this.options.arrows) {\n            // Only show the arrows if there are more slides then slidesPerPage option\n            if (this.options.slidesPerPage < slide.length) {\n                this.selector.classList.add('fc-has-arrows');\n\n                // Create arrow button\n                const nextButton = document.createElement('button');\n                nextButton.classList.add('fc-next');\n                nextButton.setAttribute('aria-label', 'Next');\n                nextButton.innerHTML = `<span class=\"fc-is-sr-only\">Next</span><span class=\"fc-icon\">${this.options.nextButton}</span>`;\n\n                // Create prev button\n                const prevButton = document.createElement('button');\n                prevButton.classList.add('fc-prev');\n                prevButton.setAttribute('aria-label', 'Previous');\n                prevButton.innerHTML = `<span class=\"fc-is-sr-only\">Previous</span><span class=\"fc-icon\">${this.options.prevButton}</span>`;\n\n                // Append next arrow to the selector\n                this.options.appendArrows.appendChild(nextButton);\n\n                // Prepend prev arrow to the selector\n                this.options.appendArrows.insertBefore(prevButton, this.options.appendArrows.firstChild);\n\n                // Add the overlay class if needed\n                if (this.options.arrowsOverlay) {\n                    this.selector.classList.add('fc-has-arrows-overlay');\n                }\n\n                this.buildArrowEvents();\n                this.updateArrows();\n            }\n        }\n    }\n\n    buildBreakpointEvent() {\n        let timer;\n\n        window.addEventListener('resize', () => {\n            clearTimeout(timer);\n            timer = setTimeout(() => {\n                this.updateResponsive();\n            }, 500);\n        });\n    }\n\n    buildBreakpoints() {\n        const breakpoints = [];\n\n        if (this.options.responsive) {\n            let previous = this.options;\n\n            this.options.responsive.forEach(({ breakpoint, options }) => {\n                if (!breakpoints.includes(breakpoint)) {\n                    breakpoints.push(breakpoint);\n\n                    this.breakpoints[breakpoint] = FlexCarousel.extend(previous, options);\n                    previous = FlexCarousel.extend(previous, options);\n                }\n            });\n        }\n\n        this.buildBreakpointEvent();\n        this.updateResponsive(false);\n    }\n\n    buildCircleEvents() {\n        const circles = this.selector.querySelector('.fc-container').querySelectorAll('.fc-circle');\n\n        circles.forEach((element, index) => {\n            element.addEventListener('click', () => this.movePage(index));\n        });\n    }\n\n    buildCircles() {\n        if (this.options.circles) {\n            // Only show the arrows if there are more slides then slidesPerPage option\n            if (this.options.slidesPerPage < this.slideAmount) {\n                this.selector.classList.add('fc-has-circles');\n\n                // Create circles container\n                const circles = document.createElement('ul');\n                circles.classList.add('fc-circles');\n\n                this.selector.querySelector('.fc-container').appendChild(circles);\n\n                const option = this.options.slidesPerPage > this.options.slidesScrolling ? this.options.slidesScrolling : this.options.slidesPerPage;\n                const amount = Math.ceil(this.slideAmount / option);\n\n                for (let index = 0; index < amount; index += 1) {\n                    const li = document.createElement('li');\n\n                    const circle = document.createElement('button');\n                    circle.classList.add('fc-circle');\n                    circle.setAttribute('aria-label', `${FlexCarousel.suffix(index + 1)} page`);\n\n                    const icon = document.createElement('span');\n                    icon.classList.add('fc-icon', 'fc-is-circle');\n\n                    const text = document.createElement('span');\n                    text.classList.add('fc-is-sr-only');\n                    text.innerHTML = index + 1;\n\n                    circle.appendChild(icon);\n                    circle.appendChild(text);\n                    li.appendChild(circle);\n                    circles.appendChild(li);\n                }\n\n                if (this.options.circlesOverlay) {\n                    this.selector.classList.add('fc-has-circles-overlay');\n                }\n\n                this.updateCircles();\n                this.buildCircleEvents();\n            }\n        }\n    }\n\n    buildOptions() {\n        if (this.options.height) {\n            this.selector.style.height = this.options.height;\n        }\n\n        this.autoplay();\n    }\n\n    buildSlideEvents() {\n        window.addEventListener('orientationchange', () => {\n            this.orientationChange();\n        });\n\n        this.selector.onfocus = () => {\n            if (document.activeElement === this.selector) {\n                document.onkeyup = (e) => {\n                    if (e.key === 'ArrowRight') {\n                        this.movePage('next');\n                    } else if (e.key === 'ArrowLeft') {\n                        this.movePage('previous');\n                    }\n                };\n            }\n        };\n\n        this.selector.onblur = () => {\n            document.onkeyup = () => {};\n        };\n    }\n\n    buildSlides() {\n        const ul = this.selector.querySelector('ul');\n\n        ul.classList.add('fc-slides');\n\n        // Add the slide class to all child div elements\n        for (let index = 0; index < ul.children.length; index += 1) {\n            ul.children[index].classList.add('fc-slide');\n        }\n\n        this.selector.setAttribute('tabindex', '0');\n\n        // Wrap slides to reduce HTML markup\n        this.selector.innerHTML = `<div class=\"fc-container\">${this.selector.innerHTML}</div>`;\n\n        const slides = this.selector.querySelector('.fc-slides');\n        const allSlides = slides.querySelectorAll('.fc-slide');\n\n        this.slideAmount = allSlides.length;\n\n        if (this.options.slidesPerPage < this.slideAmount) {\n            this.slideWidth = 100 / this.options.slidesPerPage;\n\n            // Add the min-width CSS property to all slides\n            for (let index = 0; index < this.slideAmount; index += 1) {\n                allSlides[index].style.minWidth = `${this.slideWidth}%`;\n            }\n\n            if (this.options.infinite) {\n                // Clone and prepend/append slides\n                const array = Array.from(allSlides);\n                let prepend;\n                let append;\n\n                if (this.options.slidesPerPage >= this.options.slidesScrolling) {\n                    prepend = array.slice(this.slideAmount - this.options.slidesPerPage - 1, this.slideAmount).reverse();\n                    append = array.slice(0, this.options.slidesPerPage + 1);\n                } else {\n                    prepend = array.slice(this.slideAmount - this.options.slidesPerPage, this.slideAmount).reverse();\n                    append = array.slice(0, this.options.slidesPerPage);\n                }\n\n                for (let index = 0; index < prepend.length; index += 1) {\n                    const clone = prepend[index].cloneNode(true);\n                    clone.classList.add('fc-is-clone');\n                    slides.insertBefore(clone, slides.firstChild);\n                }\n\n                for (let index = 0; index < append.length; index += 1) {\n                    const clone = append[index].cloneNode(true);\n                    clone.classList.add('fc-is-clone');\n                    slides.appendChild(clone);\n                }\n            }\n\n            this.setTransform(this.getLeftPage(this.currentPage));\n        }\n\n        this.buildSlideEvents();\n    }\n\n    destroy() {\n        this.selector.querySelectorAll('.fc-slide.fc-is-clone').forEach((element) => {\n            this.selector.querySelector('.fc-slides').removeChild(element);\n        });\n\n        this.selector.querySelectorAll('.fc-slide').forEach((element) => {\n            element.removeAttribute('class');\n            element.removeAttribute('style');\n        });\n\n        this.selector.querySelector('.fc-slides').removeAttribute('style');\n        this.selector.querySelector('.fc-slides').removeAttribute('class');\n\n        if (this.options.circles) {\n            this.selector.querySelector('.fc-container').removeChild(this.selector.querySelector('.fc-circles'));\n        }\n\n        this.selector.innerHTML = this.selector.querySelector('.fc-container').innerHTML;\n\n        this.selector.className = this.selectorName.replace('.', '');\n        this.selector.removeAttribute('style');\n    }\n\n    getLeftPage(index) {\n        let slideOffset;\n\n        if (this.options.slidesPerPage < this.slideAmount) {\n            if (this.options.slidesPerPage >= this.options.slidesScrolling) {\n                slideOffset = (this.slideWidth * (this.options.slidesPerPage + 1)) * -1;\n            } else {\n                slideOffset = (this.slideWidth * this.options.slidesPerPage) * -1;\n            }\n\n            if (!this.options.infinite) {\n                slideOffset = 0;\n            }\n        }\n\n        return ((index * this.slideWidth) * -1) + slideOffset;\n    }\n\n    init() {\n        if (!this.selector.classList.contains('fc')) {\n            this.selector.classList.add('fc');\n            this.buildSlides();\n            this.buildArrows();\n            this.buildCircles();\n            this.buildOptions();\n            this.buildBreakpoints();\n        }\n    }\n\n    movePage(index) {\n        const unevenOffset = (this.slideAmount % this.options.slidesScrolling !== 0);\n        const indexOffset = unevenOffset ? 0 : (this.slideAmount - this.currentPage) % this.options.slidesScrolling;\n\n        if (index === 'previous') {\n            const slideOffset = indexOffset === 0 ? this.options.slidesScrolling : this.options.slidesPerPage - indexOffset;\n\n            if (this.options.slidesPerPage < this.slideAmount) {\n                this.slideController(this.currentPage - slideOffset);\n            }\n        } else if (index === 'next') {\n            const slideOffset = indexOffset === 0 ? this.options.slidesScrolling : indexOffset;\n\n            if (this.options.slidesPerPage < this.slideAmount) {\n                this.slideController(this.currentPage + slideOffset);\n            }\n        } else {\n            const page = index === 0 ? 0 : index * this.options.slidesScrolling;\n            this.slideController(page);\n        }\n\n        if (this.options.arrows) {\n            this.updateArrows();\n        }\n\n        if (this.options.circles) {\n            this.updateCircles();\n        }\n    }\n\n    orientationChange() {\n        this.updateResponsive();\n        this.setTransform();\n    }\n\n    reinit(options = {}) {\n        this.destroy();\n        this.options = FlexCarousel.extend(this.defaults, options);\n        this.init();\n    }\n\n    removeTransition() {\n        const slides = this.selector.querySelector('.fc-slides');\n\n        if (this.options.transition === 'slide') {\n            slides.style.transition = '';\n        }\n    }\n\n    setTransform(position) {\n        const slides = this.selector.querySelector('.fc-slides');\n        slides.style.transform = `translate3d(${Math.ceil(position)}%, 0px, 0px)`;\n    }\n\n    slideController(index) {\n        let nextPage;\n\n        if (index < 0) {\n            if (this.slideAmount % this.options.slidesScrolling !== 0) {\n                nextPage = this.slideAmount - (this.slideAmount % this.options.slidesScrolling);\n            } else {\n                nextPage = this.slideAmount + index;\n            }\n        } else if (index >= this.slideAmount) {\n            if (this.slideAmount % this.options.slidesScrolling !== 0) {\n                nextPage = 0;\n            } else {\n                nextPage = index - this.slideAmount;\n            }\n        } else {\n            nextPage = index;\n        }\n\n        this.currentPage = nextPage;\n        this.animatePage(this.getLeftPage(index));\n    }\n\n    updateArrows() {\n        const prevButton = this.options.appendArrows.querySelector('.fc-prev');\n        const nextButton = this.options.appendArrows.querySelector('.fc-next');\n\n        if (!this.options.infinite) {\n            if (this.currentPage === 0) {\n                prevButton.setAttribute('disabled', 'disabled');\n            } else {\n                prevButton.removeAttribute('disabled');\n            }\n\n            if (this.currentPage === this.slideAmount - 1) {\n                nextButton.setAttribute('disabled', 'disabled');\n            } else {\n                nextButton.removeAttribute('disabled');\n            }\n        }\n    }\n\n    updateCircles() {\n        const circles = this.selector.querySelector('.fc-container').querySelectorAll('.fc-circle');\n\n        for (let index = 0; index < circles.length; index += 1) {\n            circles[index].classList.remove('fc-is-active');\n        }\n\n        const index = Math.floor(this.currentPage / this.options.slidesScrolling);\n\n        circles[index].classList.add('fc-is-active');\n    }\n\n    updateResponsive() {\n        let targetBreakpoint;\n\n        this.breakpoints.forEach((options, breakpoint) => {\n            if (window.innerWidth >= breakpoint) {\n                targetBreakpoint = breakpoint;\n            }\n        });\n\n        if (targetBreakpoint) {\n            if (this.activeBreakpoint) {\n                if (targetBreakpoint !== this.activeBreakpoint) {\n                    this.activeBreakpoint = targetBreakpoint;\n                    this.reinit(this.breakpoints[targetBreakpoint]);\n                }\n            } else {\n                this.activeBreakpoint = targetBreakpoint;\n                this.reinit(this.breakpoints[targetBreakpoint]);\n            }\n        } else if (this.activeBreakpoint !== null) {\n            this.activeBreakpoint = null;\n            this.reinit(this.originalOptions);\n        }\n    }\n\n    static extend(defaults, options) {\n        const extended = {};\n\n        if (defaults) {\n            const keys = Object.keys(defaults);\n\n            keys.forEach((value) => {\n                if (Object.prototype.hasOwnProperty.call(defaults, value)) {\n                    extended[value] = defaults[value];\n                }\n            });\n        }\n\n        if (options) {\n            const keys = Object.keys(options);\n\n            keys.forEach((value) => {\n                if (Object.prototype.hasOwnProperty.call(options, value)) {\n                    extended[value] = options[value];\n                }\n            });\n        }\n\n        return extended;\n    }\n\n    static suffix(index) {\n        const j = index % 10;\n        const k = index % 100;\n\n        if (j === 1 && k !== 11) {\n            return `${index}st`;\n        }\n\n        if (j === 2 && k !== 12) {\n            return `${index}nd`;\n        }\n\n        if (j === 3 && k !== 13) {\n            return `${index}rd`;\n        }\n\n        return `${index}th`;\n    }\n}\n\nexport default FlexCarousel;\n"],"names":["FlexCarousel","selector","options","selectorName","toString","document","querySelector","defaults","appendArrows","arrows","arrowsOverlay","autoplay","autoplaySpeed","circles","circlesOverlay","height","infinite","initialPage","nextButton","prevButton","responsive","slidesPerPage","slidesScrolling","transition","transitionSpeed","activeBreakpoint","autoplayDirection","autoplayTimer","breakpoints","extend","originalOptions","slideAmount","slideWidth","currentPage","init","slides","style","target","addTransition","setTransform","Math","ceil","Promise","resolve","setTimeout","removeTransition","then","getLeftPage","pause","slide","addEventListener","visibilityState","clearInterval","setInterval","movePage","querySelectorAll","length","classList","add","createElement","setAttribute","innerHTML","appendChild","insertBefore","firstChild","buildArrowEvents","updateArrows","timer","window","clearTimeout","updateResponsive","previous","forEach","breakpoint","includes","push","buildBreakpointEvent","element","index","option","amount","li","circle","suffix","icon","text","updateCircles","buildCircleEvents","orientationChange","onfocus","activeElement","onkeyup","e","key","onblur","ul","children","allSlides","minWidth","array","Array","from","prepend","append","slice","reverse","clone","cloneNode","buildSlideEvents","removeChild","removeAttribute","className","replace","slideOffset","contains","buildSlides","buildArrows","buildCircles","buildOptions","buildBreakpoints","unevenOffset","indexOffset","slideController","page","destroy","position","transform","nextPage","animatePage","remove","floor","targetBreakpoint","innerWidth","reinit","extended","keys","Object","value","prototype","hasOwnProperty","call","j","k"],"mappings":"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"}